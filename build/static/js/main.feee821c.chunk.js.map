{"version":3,"sources":["components/Filter.js","components/Notification.js","components/PersonForm.js","components/Person.js","components/Persons.js","services/persons.js","App.js","index.js"],"names":["Filter","_ref","value","handler","react_default","a","createElement","onChange","Notification","message","type","className","concat","content","PersonForm","props","onSubmit","handleAddPerson","newName","handleNewNameChange","newNumber","handleNewNumberChange","Person","person","handleDeletion","name","number","onClick","Persons","persons","map","components_Person","key","baseUrl","services_persons","axios","get","then","response","data","newObject","post","id","delete","put","App","_useState","useState","_useState2","Object","slicedToArray","filter","setNewFilter","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","notificationMessage","setNotificationMessage","_useState9","_useState10","setPersons","filteredPersons","toLowerCase","includes","showNotificationMessage","setTimeout","useEffect","personsService","initialPersons","components_Notification","components_Filter","event","target","components_PersonForm","preventDefault","clearPersonForm","newPerson","foundPerson","find","toLocaleLowerCase","window","confirm","returnedPersons","catch","components_Persons","finally","p","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.feee821c.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({ value, handler }) => (\n  <div>\n    filter shown with <input value={value} onChange={handler} />\n  </div>\n);\n\nexport default Filter;\n","import React from \"react\";\n\nconst Notification = ({ message }) => {\n  if (message.type === \"hidden\") {\n    return null;\n  }\n\n  const className = `message message-${message.type}`;\n  return <div className={className}>{message.content}</div>;\n};\n\nexport default Notification;\n","import React from \"react\";\n\nconst PersonForm = props => (\n  <form onSubmit={props.handleAddPerson}>\n    <div>\n      name: <input value={props.newName} onChange={props.handleNewNameChange} />\n    </div>\n    <div>\n      number:{\" \"}\n      <input value={props.newNumber} onChange={props.handleNewNumberChange} />\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n);\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Person = ({ person, handleDeletion }) => {\n  return (\n    <div>\n      {person.name} {person.number}{\" \"}\n      <button onClick={handleDeletion(person)}>delete</button>\n    </div>\n  );\n};\n\nexport default Person;\n","import React from \"react\";\nimport Person from \"./Person\";\n\nconst Persons = ({ persons, handleDeletion }) =>\n  persons.map(person => (\n    <Person key={person.name} person={person} handleDeletion={handleDeletion} />\n  ));\n\nexport default Persons;\n","import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then(response => response.data);\n};\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then(response => response.data);\n};\n\nconst deletePerson = id => {\n  return axios.delete(`${baseUrl}/${id}`);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then(response => response.data);\n};\n\nexport default { getAll, create, deletePerson, update };\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport Notification from \"./components/Notification\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport personsService from \"./services/persons\";\n\nconst App = () => {\n  const [filter, setNewFilter] = useState(\"\");\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [notificationMessage, setNotificationMessage] = useState({\n    type: \"hidden\",\n    content: \"\"\n  });\n  const [persons, setPersons] = useState([]);\n\n  const filteredPersons = persons.filter(person =>\n    person.name.toLowerCase().includes(filter.toLowerCase())\n  );\n\n  const showNotificationMessage = message => {\n    setNotificationMessage(message);\n    setTimeout(\n      () => setNotificationMessage({ type: \"hidden\", content: \"\" }),\n      3000\n    );\n  };\n\n  const handleFilterChange = event => setNewFilter(event.target.value);\n  const handleNewNameChange = event => setNewName(event.target.value);\n  const handleNewNumberChange = event => setNewNumber(event.target.value);\n\n  const handleAddPerson = event => {\n    event.preventDefault();\n\n    const clearPersonForm = () => {\n      setNewName(\"\");\n      setNewNumber(\"\");\n    };\n\n    const newPerson = {\n      name: newName,\n      number: newNumber\n    };\n    const foundPerson = persons.find(\n      person => person.name.toLowerCase() === newName.toLocaleLowerCase()\n    );\n    if (!foundPerson) {\n      personsService.create(newPerson).then(returnedPersons => {\n        setPersons(persons.concat(returnedPersons));\n        clearPersonForm();\n        showNotificationMessage({\n          type: \"success\",\n          content: `Added ${newName}`\n        });\n      });\n    } else if (\n      window.confirm(\n        `${newName} is already added to phonebook, replace old number with a new one?`\n      )\n    ) {\n      personsService\n        .update(foundPerson.id, newPerson)\n        .then(returnedPersons => {\n          setPersons(\n            persons.map(person =>\n              person.id !== foundPerson.id ? person : returnedPersons\n            )\n          );\n          clearPersonForm();\n          showNotificationMessage({\n            type: \"success\",\n            content: `Added ${newName}`\n          });\n        })\n        .catch(() => {\n          showNotificationMessage({\n            type: \"error\",\n            content: `Information of ${newName} has already been removed from server`\n          });\n          setPersons(persons.filter(person => person.id !== foundPerson.id));\n        });\n    }\n  };\n\n  const handleDeletion = person => () => {\n    if (window.confirm(`Delete ${person.name}?`)) {\n      personsService\n        .deletePerson(person.id)\n        .catch(() =>\n          showNotificationMessage({\n            type: \"error\",\n            content: `The person ${person.name} was already deleted from server`\n          })\n        )\n        .finally(() => setPersons(persons.filter(p => p.id !== person.id)));\n    }\n  };\n\n  useEffect(() => {\n    personsService.getAll().then(initialPersons => setPersons(initialPersons));\n  }, []);\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notificationMessage} />\n      <Filter value={filter} handler={handleFilterChange} />\n      <h2>add a new</h2>\n      <PersonForm\n        handleAddPerson={handleAddPerson}\n        newName={newName}\n        handleNewNameChange={handleNewNameChange}\n        newNumber={newNumber}\n        handleNewNumberChange={handleNewNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={filteredPersons} handleDeletion={handleDeletion} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}