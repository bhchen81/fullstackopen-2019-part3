(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),o=t.n(c),u=t(2),l=function(e){var n=e.value,t=e.handler;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:n,onChange:t}))},i=function(e){var n=e.message;if("hidden"===n.type)return null;var t="message message-".concat(n.type);return r.a.createElement("div",{className:t},n.content)},d=function(e){return r.a.createElement("form",{onSubmit:e.handleAddPerson},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.newName,onChange:e.handleNewNameChange})),r.a.createElement("div",null,"number:"," ",r.a.createElement("input",{value:e.newNumber,onChange:e.handleNewNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},m=function(e){var n=e.person,t=e.handleDeletion;return r.a.createElement("div",null,n.name," ",n.number," ",r.a.createElement("button",{onClick:t(n)},"delete"))},f=function(e){var n=e.persons,t=e.handleDeletion;return n.map(function(e){return r.a.createElement(m,{key:e.name,person:e,handleDeletion:t})})},s=t(3),h=t.n(s),p="/api/persons",b=function(){return h.a.get(p).then(function(e){return e.data})},w=function(e){return h.a.post(p,e).then(function(e){return e.data})},v=function(e){return h.a.delete("".concat(p,"/").concat(e))},E=function(e,n){return h.a.put("".concat(p,"/").concat(e),n).then(function(e){return e.data})},g=function(){var e=Object(a.useState)(""),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),m=Object(u.a)(o,2),s=m[0],h=m[1],p=Object(a.useState)(""),g=Object(u.a)(p,2),y=g[0],N=g[1],C=Object(a.useState)({type:"hidden",content:""}),j=Object(u.a)(C,2),O=j[0],k=j[1],D=Object(a.useState)([]),S=Object(u.a)(D,2),L=S[0],A=S[1],P=L.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase())}),I=function(e){k(e),setTimeout(function(){return k({type:"hidden",content:""})},3e3)};return Object(a.useEffect)(function(){b().then(function(e){return A(e)})},[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(i,{message:O}),r.a.createElement(l,{value:t,handler:function(e){return c(e.target.value)}}),r.a.createElement("h2",null,"add a new"),r.a.createElement(d,{handleAddPerson:function(e){e.preventDefault();var n=function(){h(""),N("")},t={name:s,number:y},a=L.find(function(e){return e.name.toLowerCase()===s.toLocaleLowerCase()});a?window.confirm("".concat(s," is already added to phonebook, replace old number with a new one?"))&&E(a.id,t).then(function(e){A(L.map(function(n){return n.id!==a.id?n:e})),n(),I({type:"success",content:"Added ".concat(s)})}).catch(function(){I({type:"error",content:"Information of ".concat(s," has already been removed from server")}),A(L.filter(function(e){return e.id!==a.id}))}):w(t).then(function(e){A(L.concat(e)),n(),I({type:"success",content:"Added ".concat(s)})}).catch(function(e){return I({type:"error",content:e.response.data.error})})},newName:s,handleNewNameChange:function(e){return h(e.target.value)},newNumber:y,handleNewNumberChange:function(e){return N(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(f,{persons:P,handleDeletion:function(e){return function(){window.confirm("Delete ".concat(e.name,"?"))&&v(e.id).catch(function(){return I({type:"error",content:"The person ".concat(e.name," was already deleted from server")})}).finally(function(){return A(L.filter(function(n){return n.id!==e.id}))})}}}))};t(37);o.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.2a6ab0ed.chunk.js.map